import Test'Assert

import 'json'metric
import 'metric { Metric }

Serialize = \() none | error {
  Assert'Equal(
    metric'Serialize(metric()),
    "{\"id\":\"foo\",\"name\":\"bar\"}",
  )
}

Deserialize = \() none | error {
  m = metric()

  Assert'Equal(metric'Deserialize(metric'Serialize(m)), m)
}

metric = \() Metric {
  Metric{Id: "foo", Name: "bar"}
}
